<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${hotel.name} + ' - Detail'">Detail Hotel</title>
</head>
<body>
    <th:block th:replace="~{fragment/user-layout :: layout(title=${hotel.name}, content=~{::content})}">
        <div th:fragment="content">
            
            <div class="relative w-full h-[60vh] group">
                
                <a th:href="@{/}" 
                   class="absolute top-6 left-6 md:left-12 z-30 w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 
                          bg-brand-dark/60 border-2 border-brand-accent text-brand-accent 
                          shadow-[0_0_15px_rgba(255,138,91,0.3)] backdrop-blur-md
                          hover:bg-brand-accent hover:text-white hover:scale-110 hover:shadow-[0_0_25px_rgba(255,138,91,0.6)]" 
                   title="Kembali ke Beranda">
                    <i class="ri-arrow-left-line text-xl font-bold"></i>
                </a>
                <img th:if="${hotel.image != null}" th:src="@{${hotel.imagePath}}" class="w-full h-full object-cover" data-speed="0.5">
                <img th:unless="${hotel.image != null}" src="https://source.unsplash.com/random/1600x900/?luxury-hotel" class="w-full h-full object-cover" data-speed="0.5">
                <div class="absolute inset-0 bg-gradient-to-b from-transparent via-brand-dark/50 to-brand-dark"></div>
                
                <div class="absolute bottom-0 left-0 w-full p-6 md:p-12 z-10">
                    <div class="container mx-auto">
                         <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full border border-white/20 bg-white/10 backdrop-blur-md text-white text-xs mb-4">
                             <i class="ri-hotel-line text-brand-accent"></i> Hotel Resort
                         </div>
                        <h1 class="text-5xl md:text-7xl font-serif italic text-white mb-2" th:text="${hotel.name}">Hotel Name</h1>
                        <p class="text-xl text-gray-300 flex items-center gap-2">
                            <i class="ri-map-pin-2-fill text-brand-accent"></i> <span th:text="${hotel.location}">Location</span>
                        </p>
                    </div>
                </div>
            </div>

            <div class="container mx-auto px-6 py-12 relative z-20 -mt-20">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
                    
                    <div class="lg:col-span-2 space-y-10">
                        <div class="glass-panel p-8 rounded-3xl border border-white/5 shadow-2xl shadow-brand-dark/50">
                            <h2 class="text-2xl font-bold text-white mb-4">Description</h2>
                            <p class="text-gray-400 leading-relaxed text-lg">
                                Rasakan kenyamanan tingkat tinggi di <span class="text-brand-accent font-semibold" th:text="${hotel.name}"></span>. 
                                Didesain untuk pelancong modern yang menginginkan perpaduan antara kemewahan dan fungsionalitas. 
                                Nikmati pemandangan menakjubkan dan layanan kelas dunia kami.
                            </p>
                        </div>
                        
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <div class="glass-panel p-6 rounded-2xl flex flex-col items-center justify-center text-center gap-3 hover:bg-white/5 transition border border-white/5">
                                <i class="ri-wifi-line text-3xl text-brand-accent"></i>
                                <span class="text-sm text-gray-300">Free WiFi</span>
                            </div>
                            <div class="glass-panel p-6 rounded-2xl flex flex-col items-center justify-center text-center gap-3 hover:bg-white/5 transition border border-white/5">
                                <i class="ri-restaurant-2-line text-3xl text-brand-accent"></i>
                                <span class="text-sm text-gray-300">Dining</span>
                            </div>
                            <div class="glass-panel p-6 rounded-2xl flex flex-col items-center justify-center text-center gap-3 hover:bg-white/5 transition border border-white/5">
                                <i class="ri-goblet-line text-3xl text-brand-accent"></i>
                                <span class="text-sm text-gray-300">Bar & Lounge</span>
                            </div>
                            <div class="glass-panel p-6 rounded-2xl flex flex-col items-center justify-center text-center gap-3 hover:bg-white/5 transition border border-white/5">
                                <i class="ri-customer-service-line text-3xl text-brand-accent"></i>
                                <span class="text-sm text-gray-300">24/7 Service</span>
                            </div>
                        </div>
                    </div>

                    <div class="lg:col-span-1">
                        <div class="sticky top-28 glass-panel p-8 rounded-3xl border-t border-brand-accent/50 shadow-2xl shadow-brand-accent/5 bg-brand-surface/40 backdrop-blur-xl">
                            <h3 class="text-2xl font-serif italic text-white mb-6">Reserve your stay</h3>
                            
                            <form th:action="@{/order/create}" method="post" class="space-y-6">
                                <input type="hidden" name="itemType" value="Hotel" />
                                <input type="hidden" id="selectedItemId" name="itemId" th:value="${rooms != null and !rooms.isEmpty() ? rooms[0].roomId : ''}" />

                                <div th:if="${rooms != null && !rooms.isEmpty()}">
                                    <div class="space-y-2">
                                        <label class="text-xs uppercase tracking-wider text-gray-500 font-bold">Room Type</label>
                                        <div class="relative">
                                            <select id="roomSelect" onchange="updatePrice()" class="w-full bg-brand-dark/50 border border-white/10 text-white rounded-xl p-4 appearance-none focus:border-brand-accent focus:ring-0 outline-none cursor-pointer transition-colors hover:bg-brand-dark/70">
                                                <option th:each="room : ${rooms}" 
                                                        th:value="${room.roomId}" 
                                                        th:data-price="${room.price}"
                                                        th:text="${room.roomType} + ' (' + ${room.capacity} + ' Pax)'">
                                                    Deluxe Room
                                                </option>
                                            </select>
                                            <i class="ri-arrow-down-s-line absolute right-4 top-4 text-gray-400 pointer-events-none"></i>
                                        </div>
                                    </div>

                                    <div class="space-y-2 mt-4">
                                        <label class="text-xs uppercase tracking-wider text-gray-500 font-bold">Quantity</label>
                                        <div class="flex items-center bg-brand-dark/50 border border-white/10 rounded-xl p-2">
                                            <button type="button" onclick="adjustQty(-1)" class="w-10 h-10 rounded-lg bg-white/5 hover:bg-white/10 text-white transition-colors"><i class="ri-subtract-line"></i></button>
                                            <input type="number" id="qtyInput" name="quantity" value="1" min="1" class="bg-transparent border-none text-center text-white font-bold w-full focus:ring-0 appearance-none">
                                            <button type="button" onclick="adjustQty(1)" class="w-10 h-10 rounded-lg bg-white/5 hover:bg-white/10 text-white transition-colors"><i class="ri-add-line"></i></button>
                                        </div>
                                    </div>

                                    <div class="py-6 border-b border-white/10 flex justify-between items-end">
                                        <span class="text-gray-400 text-sm">Total / night</span>
                                        <span id="displayPrice" class="text-3xl font-bold text-brand-accent" th:text="'Rp ' + ${#numbers.formatDecimal(rooms[0].price, 0, 'POINT', 0, 'COMMA')}">Rp 0</span>
                                    </div>

                                    <button type="submit" class="w-full bg-brand-accent hover:bg-orange-600 text-brand-dark font-bold py-4 rounded-xl transition-all transform hover:scale-[1.02] flex items-center justify-center gap-2 mt-4 shadow-lg shadow-brand-accent/20">
                                        <span>Book Now</span>
                                        <i class="ri-arrow-right-line"></i>
                                    </button>
                                </div>
                                
                                <div th:unless="${rooms != null && !rooms.isEmpty()}" class="text-center py-8">
                                    <div class="w-16 h-16 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4 text-gray-500">
                                        <i class="ri-door-lock-line text-2xl"></i>
                                    </div>
                                    <p class="text-gray-500">Kamar tidak tersedia.</p>
                                </div>
                            </form>
                        </div>
                    </div>

                </div>
            </div>

            <script>
                function updatePrice() {
                    const select = document.getElementById('roomSelect');
                    const selectedOption = select.options[select.selectedIndex];
                    const price = selectedOption.getAttribute('data-price');
                    document.getElementById('selectedItemId').value = selectedOption.value;
                    
                    const formatter = new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 });
                    document.getElementById('displayPrice').innerText = formatter.format(price);
                }

                function adjustQty(amount) {
                    const input = document.getElementById('qtyInput');
                    let val = parseInt(input.value) + amount;
                    if(val < 1) val = 1;
                    input.value = val;
                }
            </script>
        </div>
    </th:block>
</body>
</html>